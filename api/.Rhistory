hgnc_id_from_hgnc_id <- hgnc_id_from_hgnc_id %>%
mutate(hgnc_id = if (exists('hgnc_id', where = hgnc_id_from_hgnc_id)) hgnc_id else NA) %>%
mutate(hgnc_id = if (exists('hgnc_id', where = hgnc_id_from_hgnc_id)) toupper(hgnc_id) else "") %>%
mutate(hgnc_id = as.integer(str_split_fixed(hgnc_id, ":", 2)[, 2]))
return_tibble <- hgnc_id_list_tibble %>%
left_join(hgnc_id_from_hgnc_id, by = "hgnc_id") %>%
select(symbol)
return(return_tibble)
}
hgnc_id_from_symbol_grouped <- function(input_tibble, request_max = 150) {
input_tibble <- as_tibble(input_tibble)
row_number <- nrow(input_tibble)
groups_number <- ceiling(row_number/request_max)
input_tibble_request <- input_tibble %>%
mutate(group = sample(1:groups_number, row_number, replace=T)) %>%
group_by(group) %>%
mutate(response = hgnc_id_from_symbol(value)$hgnc_id) %>%
ungroup()
input_tibble_request_repair <- input_tibble_request %>%
filter(is.na(response)) %>%
select(value) %>%
unique() %>%
rowwise() %>%
mutate(response = hgnc_id_from_prevsymbol(value)) %>%
mutate(response = case_when(!is.na(response) ~ response, is.na(response) ~ hgnc_id_from_aliassymbol(value)))
input_tibble_request <- input_tibble_request %>%
left_join(input_tibble_request_repair, by = "value") %>%
mutate(response = case_when(!is.na(response.x) ~ response.x, is.na(response.x) ~ response.y))
return(input_tibble_request$response)
}
############################################
hgnc_id_from_symbol_grouped("NAA10")
symbol_from_hgnc_id("18704")
install.packages('DiagrammeR')
# sysndd_plumber.R
##-------------------------------------------------------------------##
# load libraries
library(plumber)
library(tidyverse)
library(DBI)
library(RMariaDB)
library(jsonlite)
library(config)
library(jose)
library(plotly)
library(RCurl)
setwd("C:/development/sysndd/api")
##-------------------------------------------------------------------##
dw <- config::get("sysndd_db_local")
##-------------------------------------------------------------------##
sysndd_db <- dbConnect(RMariaDB::MariaDB(), dbname = dw$dbname, user = dw$user, password = dw$password, server = dw$server, host = dw$host, port = dw$port)
sysndd_db_disease_table <- tbl(sysndd_db, "ndd_entity_view")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
))
View(sysndd_db_disease_collected)
sysndd_db_disease_collected
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name)
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
pivot_longer(names_to = "match", values_to = "value")
pivot_longer
?pivot_longer
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
pivot_longer(names_to = "match", values_to = "value")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value") %>%
filter(str_detect(entity_id, "1755") | str_detect(value, "1755"))
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
pivot_longer(everything(), names_to = "match", values_to = "value")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>% mutate(entity_id = as.character(entity_id)) %>%
pivot_longer(everything(), names_to = "match", values_to = "value")
?pivot_longer
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>% mutate(entity = as.character(entity_id)) %>%
pivot_longer(everything(), names_to = "match", values_to = "value")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>% mutate(entity = as.character(entity_id)) %>%
pivot_longer(everything(), names_to = "match", values_to = "value")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>% mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value")
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value") %>%
mutate(value = str_replace(value, "^.:")) %>%
filter(str_detect(entity_id, "1755") | str_detect(value, "1755"))
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value") %>%
mutate(value = str_replace(value, "^.:", "")) %>%
filter(str_detect(entity_id, "1755") | str_detect(value, "1755"))
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value") %>%
mutate(value = str_replace(value, "^.+:", "")) %>%
filter(str_detect(entity_id, "1755") | str_detect(value, "1755"))
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "match", values_to = "value") %>%
mutate(value = str_replace(value, "^.+:", "")) %>%
filter(str_detect(value, "1755"))
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(value = str_replace(value, "^.+:", "")) %>%
filter(str_detect(value, "1755"))
install.packages("stringdist")
library("stringdist")
stringdist("611755", "1755")
?stringdist
stringdist("611755", "1755", method='jw', p=0)
stringdist("61755", "1755", method='jw', p=0)
stringdist("1755", "1755", method='jw', p=0)
stringdist("17556", "1755", method='jw', p=0)
stringdist("17556", "1755", method='jw', p=0.1)
stringdist("61755", "1755", method='jw', p=0.1)
?stringdist
searchterm <- "1755"
?stringdist
searchterm <- "1755"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(value = str_replace(value, "^.+:", "")) %>%
mutate(searchdist = stringdist(value, searchterm, method='jw', p=0.1))
sysndd_db <- dbConnect(RMariaDB::MariaDB(), dbname = dw$dbname, user = dw$user, password = dw$password, server = dw$server, host = dw$host, port = dw$port)
sysndd_db_disease_table <- tbl(sysndd_db, "ndd_entity_view")
searchterm <- "1755"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(value = str_replace(value, "^.+:", "")) %>%
mutate(searchdist = stringdist(value, searchterm, method='jw', p=0.1))
searchterm <- "Noonan"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(value = str_replace(value, "^.+:", "")) %>%
mutate(searchdist = stringdist(value, searchterm, method='jw', p=0.1))
searchterm <- "noonan"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(value = str_replace(value, "^.+:", "")) %>%
mutate(searchdist = stringdist(value, searchterm, method='jw', p=0.1))
?tolower
searchterm <- "noonan"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(value = str_replace(value, "^.+:", "")) %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1))
searchterm <- "1755"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(value = str_replace(value, "^.+:", "")) %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1))
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value")
searchterm <- "1755"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1))
searchterm <- "1755"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist)
View(sysndd_db_disease_collected)
searchterm <- "Noonan"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist)
searchterm <- "Noonan"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist, value)
searchterm <- "Noonan syndrome"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist, value)
searchterm <- "Noonan syndrome like"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist, value)
searchterm <- "Noonan like"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist, value)
searchterm <- "Noonan like hair"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist, value)
?top_n
searchterm <- "Noonan"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist, value) %>%
slice_head(10)
?slice_head
searchterm <- "Noonan"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist, value) %>%
slice_head(n=10)
searchterm <- "1755"
sysndd_db_disease_collected <- sysndd_db_disease_table %>%
arrange(entity_id) %>%
collect() %>%
mutate(ndd_phenotype = case_when(
ndd_phenotype == 1 ~ "Yes",
ndd_phenotype == 0 ~ "No"
)) %>%
select(entity_id, hgnc_id, symbol, disease_ontology_id_version, disease_ontology_name) %>%
mutate(entity = as.character(entity_id)) %>%
pivot_longer(!entity_id, names_to = "search", values_to = "value") %>%
mutate(searchdist = stringdist(str_to_lower(value), str_to_lower(searchterm), method='jw', p=0.1)) %>%
arrange(searchdist, value) %>%
slice_head(n=10)
sysndd_db_disease_collected$searchdist[0]
sysndd_db_disease_collected$searchdist[1]
sysndd_db_disease_collected$searchdist
sysndd_db_disease_collected$searchdist[[0]]
sysndd_db_disease_collected$searchdist
sysndd_db_disease_collected$searchdist[0]
sysndd_db_disease_collected$searchdist[5]
sysndd_db_disease_collected$searchdist[0] == 0
sysndd_db_disease_collected$searchdist[0] == numeric(0)
sysndd_db_disease_collected$searchdist[0] <= numeric(0)
0==0
sysndd_db_disease_collected$searchdist[0]<=numeric(0)
sysndd_db_disease_collected$searchdist[0]==0
as.numeric(sysndd_db_disease_collected$searchdist[0])==0
unlist(sysndd_db_disease_collected$searchdist[0])==0
unlist(sysndd_db_disease_collected$searchdist[0])
unlist(sysndd_db_disease_collected$searchdist[1])
unlist(sysndd_db_disease_collected$searchdist[2])
sysndd_db_disease_collected$searchdist[1]==0
